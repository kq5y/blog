---
import type { ContentEntryMap } from "astro:content";

import { ArticleList } from "@/components/ArticleList";
import { SITE_NAME } from "@/const";
import Layout from "@/layouts/Layout.astro";
import { getAllArticles } from "@/lib/article";
import { asyncFlatMap } from "@/lib/async";

const articles = (
  await asyncFlatMap(["blog", "memo"], async (category) => {
    return await getAllArticles(category as keyof ContentEntryMap, false);
  })
)
  .sort((a, z) => new Date(z.date).getTime() - new Date(a.date).getTime())
  .slice(0, 5);
---

<Layout title={SITE_NAME}>
  <ArticleList title="Recent Posts" articles={articles} />
</Layout>
