---
import type { ContentEntryMap } from "astro:content";

import { SITE_NAME } from "@/const";
import Layout from "@/layouts/Layout.astro";
import { categoryToStr, getAllArticles } from "@/lib/article";
import { ArticleList } from "@/components/ArticleList";

export async function getStaticPaths() {
  const categories = ["blog", "memo"];
  return categories.map((category) => {
    return {
      params: {
        category,
      },
    };
  });
}

const { category } = Astro.params;

const articles = await getAllArticles(category as keyof ContentEntryMap, false);
---

<Layout title=`${categoryToStr(category)} - ${SITE_NAME}`>
  <ArticleList title={categoryToStr(category)} articles={articles} />
</Layout>
